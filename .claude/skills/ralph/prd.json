{
  "project": "obsidian-workout-plugin",
  "branchName": "ralph/phase2-core-features",
  "description": "Phase 2 Core Features - Exercise block automation and progressive overload tracking",
  "userStories": [
    {
      "id": "US-001",
      "title": "Configure Exercise Block Template in Settings",
      "description": "As a user, I want to customize the exercise block template in settings so that it matches my preferred structure.",
      "acceptanceCriteria": [
        "Add exerciseBlockTemplate field to WorkoutChartsSettings as string",
        "Add default template to DEFAULT_SETTINGS with placeholders: {{exercise}}, {{duration}}, {{workout}}, {{preset}}",
        "Add 'Exercise Block Template' textarea in settings tab under new 'Templates' section",
        "Template textarea shows default template with placeholder documentation",
        "Template persists across plugin reloads",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Completed: Added exerciseBlockTemplate field to settings interface, default template with all required placeholders, new Templates section in settings tab with textarea and documentation."
    },
    {
      "id": "US-002",
      "title": "Add Exercise Block Command with Modal",
      "description": "As a user, I want a command to insert a complete exercise block structure so that I don't have to manually create timer and log blocks each time.",
      "acceptanceCriteria": [
        "Register 'workout-planner:add-exercise-block' command in CommandHandlerService",
        "Create AddExerciseBlockModal that extends ModalBase",
        "Modal includes exercise name input with ExerciseAutocomplete component",
        "Modal includes timer duration selector with preset dropdown (if presets exist)",
        "Modal includes workout file selector that defaults to current file",
        "Clicking 'Insert' parses template from settings, replaces placeholders, and inserts at cursor",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Completed: Added 'add-exercise-block' command to CommandHandlerService, created AddExerciseBlockModal extending BaseInsertModal with ExerciseAutocomplete, timer preset dropdown (if presets exist), timer duration input, and workout file selector. Modal parses template from settings and replaces all placeholders ({{exercise}}, {{duration}}, {{workout}}, {{preset}}). TypeScript compilation passes."
    },
    {
      "id": "US-003",
      "title": "Add targetWeight and targetReps parameters to workout-log",
      "description": "As a user, I want to set target weight and reps in workout-log blocks so that the system can track my progression goal.",
      "acceptanceCriteria": [
        "Add targetWeight optional parameter to EmbeddedTableParams interface (number)",
        "Add targetReps optional parameter to EmbeddedTableParams interface (number)",
        "Add weightIncrement field to WorkoutChartsSettings (number, default 2.5)",
        "Add weightIncrement setting in settings tab under new 'Progressive Overload' section",
        "EmbeddedTableView parses targetWeight and targetReps from code block parameters",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Completed: Added targetWeight and targetReps optional parameters to EmbeddedTableParams interface. Added weightIncrement field to WorkoutChartsSettings with default value 2.5. Created new 'Progressive Overload' section in settings tab with weight increment input field. Parameters are automatically parsed by parseCodeBlockParams in CodeBlockProcessorService. TypeScript compilation passes."
    },
    {
      "id": "US-004",
      "title": "Display target header in workout log",
      "description": "As a user, I want to see my target weight and reps displayed in the log header so that I know my current goal.",
      "acceptanceCriteria": [
        "When targetWeight or targetReps is set, render target header above the log table",
        "Header format: 'Target: {weight}kg × {reps} reps' or partial if only one is set",
        "Header styled with subtle background color using Obsidian CSS variables",
        "Header appears between exercise name and table",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Completed: Added renderTargetHeader() method to EmbeddedTableView that renders target header when targetWeight or targetReps is set. Header displays 'Target: Xkg × Y reps' format (or partial if only one is set). Added TARGET_PREFIX constant to CONSTANTS.WORKOUT.LABELS.TABLE. Added CSS styling for .workout-target-header with subtle background color, border-left accent, centered text using Obsidian CSS variables. Header appears between Add Log button and table container. TypeScript compilation passes."
    },
    {
      "id": "US-005",
      "title": "Display target progress indicator",
      "description": "As a user, I want to see visual progress toward my target so that I know how close I am to progression.",
      "acceptanceCriteria": [
        "Progress bar component shown in target header when both targetWeight and targetReps are set",
        "Calculate progress: find best recent reps at targetWeight, compare to targetReps",
        "Progress bar fills based on (bestReps / targetReps) * 100",
        "Color coding: red (0-50%), yellow (50-90%), green (90-100%), bright green (100%+)",
        "Tooltip shows exact numbers: 'Best: X reps / Target: Y reps'",
        "Progress bar styled with Obsidian CSS variables",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 5,
      "passes": true,
      "notes": "Completed: Added renderProgressBar() method to EmbeddedTableView that renders progress bar when both targetWeight and targetReps are set. Progress calculation finds best (max) reps at target weight from filtered data. Progress bar fills based on (bestReps / targetReps) * 100 with color coding: red (0-50%), yellow (50-90%), green (90-100%), bright green (100%+). Tooltip shows 'Best: X reps / Target: Y reps'. Added CSS styling for .workout-progress-container, .workout-progress-bar, .workout-progress-fill, and color classes using Obsidian CSS variables. TypeScript compilation passes."
    },
    {
      "id": "US-006",
      "title": "Target achievement notification badge",
      "description": "As a user, I want to see a notification when I achieve my target so that I know it's time to increase the weight.",
      "acceptanceCriteria": [
        "Add achievedTargets field to WorkoutChartsSettings as Record<string, boolean>",
        "When latest entry meets or exceeds targetReps at targetWeight, show achievement badge",
        "Badge text: 'Target Reached! Consider increasing weight'",
        "Badge styled with celebratory color (green) using Obsidian CSS variables",
        "Badge has dismiss button that sets achievedTargets[exerciseName] = true",
        "Badge does not re-appear after dismissal until targetWeight changes",
        "Achievement state persists across plugin reloads",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 6,
      "passes": true,
      "notes": "Completed: Added achievedTargets field to WorkoutChartsSettings as Record<string, number> (stores target weight, not boolean). Implemented renderAchievementBadge() and checkTargetAchieved() methods in EmbeddedTableView. Badge shows 'Target Reached! Consider increasing weight' when latest entry at targetWeight meets or exceeds targetReps. Badge styled with green background using Obsidian CSS variables with slide-in animation. Dismiss button (×) stores the target weight in achievedTargets[exercise], preventing badge from reappearing until targetWeight changes. Achievement state persists via plugin.saveSettings(). Added CSS styling in _table.scss with animation. TypeScript compilation passes."
    },
    {
      "id": "US-007",
      "title": "Suggest next weight progression",
      "description": "As a user, I want a suggested next weight when I hit my target so that I have a clear progression path.",
      "acceptanceCriteria": [
        "When target achieved (badge shown), display suggested next weight",
        "Suggestion text: 'Suggested next: {currentWeight + increment}kg'",
        "Uses weightIncrement from settings (default 2.5kg)",
        "Suggestion appears next to achievement badge",
        "Clicking suggestion opens confirmation: 'Update target weight to Xkg?'",
        "On confirm, updates targetWeight parameter in the code block using Obsidian edit API",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 7,
      "passes": true,
      "notes": "Completed: Added weight progression suggestion feature to achievement badge. Implemented renderWeightSuggestion() method that displays suggested next weight (current + increment) next to achievement badge. Added updateTargetWeight() method that uses editor API to find and update targetWeight parameter in code block. Added confirmation dialog before updating. Added constants SUGGESTED_NEXT_WEIGHT, CONFIRM_UPDATE_TARGET, UPDATE_TARGET_WEIGHT. Added CSS styling for .workout-weight-suggestion, .workout-suggestion-text, and .workout-update-target-button with hover effects. TypeScript compilation passes."
    },
    {
      "id": "US-008",
      "title": "Quick log with previous values and adjust buttons",
      "description": "As a user, I want to quickly log a set with my previous values so that logging during workouts is faster.",
      "acceptanceCriteria": [
        "Add 'Repeat Last' button in workout-log table header (only when entries exist)",
        "Clicking opens CreateLogModal pre-filled with latest entry values (exercise, weight, reps, workout)",
        "Add quick adjust buttons to weight field: '+{increment}' and '-{increment}' (uses weightIncrement setting)",
        "Add quick adjust buttons to reps field: '+1' and '-1'",
        "Quick adjust buttons positioned next to input fields",
        "Buttons styled as compact icons/text using Obsidian CSS variables",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    }
  ]
}
