@use "../variables";

/* ============================================================================
   BUTTON SYSTEM
   ============================================================================
   Organized for maintainability:
   1. Base placeholders & mixins (shared behaviors)
   2. Variant placeholders (colors/styles)
   3. Size placeholders
   4. Component implementations
   ============================================================================ */

/* ----------------------------------------------------------------------------
   1. BASE PLACEHOLDERS & MIXINS
   ---------------------------------------------------------------------------- */

// Core interactive behavior - use on all clickable buttons
%workout-btn-interactive {
  cursor: pointer;
  transition: var(--workout-transition);
}

// Base button reset and common styles
%workout-btn-base {
  @extend %workout-btn-interactive;
  border: none;
  border-radius: var(--button-radius, var(--workout-radius-md));
  font-weight: var(--workout-font-weight-semibold);
}

// Press effect - subtle scale down on click
@mixin workout-btn-press($scale: 0.95) {
  &:active {
    transform: scale($scale);
  }
}

// Lift effect - subtle rise on hover
@mixin workout-btn-lift($distance: -2px) {
  &:hover {
    transform: translateY($distance);
  }
}

// Color border variant - for outlined buttons (success/error)
@mixin workout-btn-outlined($color) {
  color: $color;
  border: var(--workout-border-thin) solid $color;
}

/* ----------------------------------------------------------------------------
   2. VARIANT PLACEHOLDERS (Colors)
   ---------------------------------------------------------------------------- */

%workout-btn-primary {
  @extend %workout-btn-interactive;
  background: var(--interactive-accent);
  color: var(--text-on-accent);

  &:hover {
    background: var(--interactive-accent-hover);
    color: var(--text-on-accent);
  }
}

%workout-btn-secondary {
  @extend %workout-btn-interactive;
  background: var(--interactive-normal);
  color: var(--text-on-normal);
}

@mixin workout-btn-secondary-hover {
  background: var(--interactive-normal-hover);
}

%workout-btn-tertiary {
  @extend %workout-btn-interactive;
  background: var(--interactive-tertiary);
  color: var(--text-on-tertiary);

  &:hover {
    background: var(--interactive-tertiary-hover);
    color: var(--text-on-tertiary);
  }
}

%workout-btn-warning {
  background: var(--text-warning);
  color: var(--text-on-accent);
}

@mixin workout-btn-warning-hover {
  background: var(--text-warning-hover);
}

%workout-btn-success {
  background: var(--interactive-success);
  color: var(--text-on-accent);

  &:hover {
    background: var(--interactive-success-hover);
  }
}

%workout-btn-danger {
  background: var(--interactive-error);
  color: var(--text-on-accent);

  &:hover {
    background: var(--interactive-error-hover);
  }
}

/* ----------------------------------------------------------------------------
   3. SIZE PLACEHOLDERS
   ---------------------------------------------------------------------------- */

%workout-btn-small {
  padding: var(--workout-space-xs) var(--workout-space-sm);
  font-size: var(--workout-font-xs);
}

%workout-btn-medium {
  padding: var(--workout-space-md) var(--workout-space-xl);
  font-size: var(--workout-font-base);
}

%workout-btn-big {
  padding: var(--workout-space-lg) var(--workout-space-2xl);
  font-size: var(--workout-font-lg);
}

%workout-btn-giant {
  padding: var(--workout-space-xl) var(--workout-space-3xl);
  font-size: var(--workout-font-xl);
}

/* ============================================================================
   4. COMPONENT IMPLEMENTATIONS
   ============================================================================ */

/* ----------------------------------------------------------------------------
   Button Container
   ---------------------------------------------------------------------------- */

.workout-buttons-container {
  display: flex;
  gap: var(--workout-space-md);
  justify-content: flex-end;

  .workout-btn {
    @extend %workout-btn-base;
  }

  .workout-btn-primary {
    @extend %workout-btn-primary;
  }

  .workout-btn-secondary {
    @extend %workout-btn-secondary;

    &:hover {
      @include workout-btn-secondary-hover;
    }
  }

  .workout-btn-warning {
    @extend %workout-btn-warning;

    &:hover {
      @include workout-btn-warning-hover;
      @include workout-btn-lift(-1px);
    }
  }

  // Modifier: add log layout
  &.workout-add-log-button-container {
    flex-wrap: wrap;
    justify-content: space-between;

    .workout-btn-primary {
      @extend %workout-btn-big;
    }
  }

  // Modifier: vertical action buttons
  &.workout-action-buttons {
    flex-direction: column;
  }
}

/* ----------------------------------------------------------------------------
   Charts Modal Buttons
   ---------------------------------------------------------------------------- */

.workout-charts-modal-main-container {
  .workout-btn-primary,
  .workout-btn-warning {
    @extend %workout-btn-giant;
  }
}

/* ----------------------------------------------------------------------------
   Single Context Buttons
   ---------------------------------------------------------------------------- */

.workout-exercise-autocomplete-no-found .workout-create-exercise-page-btn {
  @extend %workout-btn-secondary;

  &:hover {
    @include workout-btn-secondary-hover;
  }
}

.workout-achievement-badge .workout-update-target-button {
  @extend %workout-btn-primary;
}

/* ----------------------------------------------------------------------------
   Toggle Buttons
   ---------------------------------------------------------------------------- */

.workout-frame-toggle {
  display: flex;
  gap: var(--workout-space-xs);
  border: var(--workout-border-thin) solid var(--background-modifier-border);
  border-radius: var(--workout-radius-md);
  padding: var(--workout-space-xs);
  background: var(--background-secondary);

  .workout-toggle-btn {
    @extend %workout-btn-secondary;
    padding: var(--workout-space-sm) var(--workout-space-lg);
    color: var(--text-muted);
    font-size: var(--workout-font-base);
    border-radius: var(--button-radius, var(--workout-radius-sm));
    font-weight: var(--workout-font-weight-medium);

    &:hover {
      background: var(--background-modifier-hover);
      color: var(--text-normal);
    }

    &.active {
      @extend %workout-btn-primary;
      font-weight: var(--workout-font-weight-semibold);
    }
  }
}

/* ----------------------------------------------------------------------------
   Quick Adjust Buttons (+/-)
   ---------------------------------------------------------------------------- */

.workout-adjust-buttons {
  display: flex;
  gap: var(--workout-space-xs);
}

.workout-adjust-btn {
  @extend %workout-btn-interactive;
  @include workout-btn-press;
  padding: var(--workout-space-xs) var(--workout-space-sm);
  min-width: 2rem;

  &:hover {
    background: var(--interactive-hover);
    border-color: var(--interactive-accent);
  }

  &.workout-adjust-plus {
    @include workout-btn-outlined(var(--text-success));
  }

  &.workout-adjust-minus {
    @include workout-btn-outlined(var(--text-error));
  }
}

/* ----------------------------------------------------------------------------
   Quick Log Buttons
   ---------------------------------------------------------------------------- */

// Shared transition for quick log buttons
%workout-quick-log-btn-base {
  @extend %workout-btn-giant;
  @extend %workout-btn-interactive;
  @include workout-btn-press(0.98);
  transition:
    transform 0.1s ease,
    background-color 0.2s ease;
}

.workout-quick-log-button-container {
  display: flex;
  justify-content: center;
}

.workout-quick-log-cancel-btn {
  @extend %workout-quick-log-btn-base;
  @extend %workout-btn-secondary;

  &:hover {
    @include workout-btn-secondary-hover;
  }
}

.workout-quick-log-confirm-btn {
  @extend %workout-quick-log-btn-base;
  @extend %workout-btn-primary;
  @include workout-btn-lift;
}

/* ----------------------------------------------------------------------------
   Quick Log Weight Buttons
   ---------------------------------------------------------------------------- */

.workout-quick-log-weight-btn {
  @extend %workout-btn-interactive;
  flex-shrink: 0;
  min-width: 56px;
  min-height: 44px;
  padding: var(--workout-space-sm) var(--workout-space-md);

  background: var(--background-secondary);
  border: 2px solid var(--background-modifier-border);
  border-radius: var(--workout-radius-md);

  color: var(--text-normal);
  font-size: var(--workout-font-base);
  font-weight: var(--workout-font-weight-bold);
  transition: all 0.15s ease;

  &:hover {
    background: var(--interactive-hover);
    border-color: var(--interactive-accent);
  }

  &:active {
    transform: scale(0.95);
    background: var(--interactive-accent);
    color: var(--text-on-accent);
    border-color: var(--interactive-accent);
  }

  // Decrement variant (red)
  &-decrement {
    @include workout-btn-outlined(var(--text-error));

    &:hover {
      background: rgba(var(--color-red-rgb), 0.1);
    }
  }

  // Increment variant (green)
  &-increment {
    @include workout-btn-outlined(var(--text-success));

    &:hover {
      background: rgba(var(--color-green-rgb), 0.1);
    }
  }
}

/* ----------------------------------------------------------------------------
   Timer Buttons
   ---------------------------------------------------------------------------- */

.workout-timer-btn {
  @extend %workout-btn-interactive;
  @extend %workout-btn-big;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: var(--workout-size-2xl);
  font-size: var(--workout-size-xl);
  background: var(--background-primary);
  border: var(--workout-border-thin) solid var(--background-modifier-border);
  border-radius: var(--button-radius, var(--workout-radius-md));
  color: var(--text-normal);

  &:hover {
    background: var(--background-modifier-hover);
  }

  &-start {
    @extend %workout-btn-success;
  }

  &-stop {
    @extend %workout-btn-danger;
  }

  &-start-stop {
    @extend %workout-btn-primary;
    border-color: var(--interactive-accent);
  }

  &-reset {
    background: var(--background-modifier-border);
    color: var(--text-normal);

    &:hover {
      background: var(--background-modifier-border-hover);
    }
  }
}

/* ----------------------------------------------------------------------------
   Table Action Buttons
   ---------------------------------------------------------------------------- */

// Shared hover effect for table actions
@mixin workout-table-action-hover($bg-color) {
  &:hover {
    background: $bg-color;
    color: var(--text-on-accent);
    transform: scale(1.1);
  }
}

.workout-table-action-btn {
  @extend %workout-btn-interactive;
  @include workout-btn-press;
  min-width: var(--workout-size-2xl);
  height: var(--workout-size-2xl);
}

.workout-table-action-btn-edit {
  @include workout-table-action-hover(var(--interactive-accent));
}

.workout-table-action-btn-delete {
  @include workout-table-action-hover(var(--text-error));
}

@media print {
  .workout-add-log-button-container {
    display: none !important;
  }
}

@media (max-width: variables.$breakpoint-tablet) {
  .workout-frame-toggle {
    justify-content: center;
    width: 100%;
  }

  .workout-toggle-btn {
    flex: 1;
    padding: var(--workout-space-md) var(--workout-space-md);
  }

  .workout-export-btn {
    width: 100%;
    justify-content: center;
  }

  .workout-action-buttons {
    gap: var(--workout-space-md);
  }

  .workout-action-button {
    padding: var(--workout-space-lg) var(--workout-space-lg);
    font-size: var(--workout-font-base);
  }
}

@media (max-width: variables.$breakpoint-mobile) {
  .workout-toggle-btn {
    padding: var(--workout-space-sm) var(--workout-space-md);
    font-size: var(--workout-font-sm);
  }
}
