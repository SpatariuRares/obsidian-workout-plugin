{
  "project": "obsidian-workout-plugin",
  "branchName": "ralph/test-coverage-90",
  "description": "Increase test coverage from ~79% to 90-95% across all metrics (statements, branches, functions, lines)",
  "userStories": [
    {
      "id": "US-001",
      "title": "Add comprehensive tests for ParameterUtils.ts",
      "description": "As a developer, I need ParameterUtils fully tested so that parameter parsing is reliable. This file currently has 12% statement coverage and 0% branch coverage.",
      "acceptanceCriteria": [
        "Create app/utils/__tests__/ParameterUtils.test.ts",
        "Test all exported functions in ParameterUtils.ts",
        "Cover parseParameters function with various input formats",
        "Cover edge cases: empty input, malformed input, missing values",
        "Achieve 90%+ statement and branch coverage on ParameterUtils.ts",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Completed 2026-02-03. Created 63 tests covering all exported functions and constants. Achieved 100% statement, branch, function, and line coverage."
    },
    {
      "id": "US-002",
      "title": "Add tests for DomUtils.ts",
      "description": "As a developer, I need DomUtils tested so that DOM manipulation helpers are reliable. This file currently has 50% statement coverage and 0% function coverage.",
      "acceptanceCriteria": [
        "Create app/utils/__tests__/DomUtils.test.ts",
        "Test all exported functions in DomUtils.ts",
        "Cover edge cases: null elements, missing attributes, empty strings",
        "Achieve 90%+ coverage on DomUtils.ts",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Completed 2026-02-03. Created 25 tests covering the setCssProps static method. Tested single/multiple properties, edge cases (empty props, overwriting, preserving existing styles), different element types (div, span, button, input, canvas), CSS transforms/transitions, and CSS variable handling. Achieved 100% statement, branch, function, and line coverage."
    },
    {
      "id": "US-003",
      "title": "Expand DateUtils.ts coverage for lines 132-185",
      "description": "As a developer, I need full DateUtils coverage. Lines 132-185 are currently uncovered (61.76% statements, 60% lines).",
      "acceptanceCriteria": [
        "Read DateUtils.ts to identify uncovered functions in lines 132-185",
        "Add tests to app/utils/__tests__/DateUtils.test.ts for uncovered code",
        "Cover date formatting and parsing edge cases",
        "Achieve 90%+ coverage on DateUtils.ts",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Completed 2026-02-03. Added 28 new tests covering toTime, toDateKey, toShortDate, toFullDate, and formatDateWithFormat. Achieved 94.11% statement, 100% branch, 100% function, and 93.84% line coverage. Uncovered lines (138, 154, 169, 185) are unreachable catch blocks since JavaScript's Date constructor doesn't throw exceptions for invalid inputs."
    },
    {
      "id": "US-004",
      "title": "Expand ChartDataUtils.ts coverage - lines 24-43",
      "description": "As a developer, I need ChartDataUtils tested for lines 24-43. Current branch coverage is only 39.17%.",
      "acceptanceCriteria": [
        "Read ChartDataUtils.ts to understand logic in lines 24-43",
        "Add tests to app/utils/__tests__/ChartDataUtils.test.ts",
        "Cover all branches in the identified code section",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Completed 2026-02-03. Created app/utils/__tests__/ChartDataUtils.test.ts with 39 tests covering the private getCustomFieldNumber method (lines 24-43) through the public processChartData interface. Tests cover: exact key matching with number/string values, case-insensitive matching, unparseable strings returning 0, key not found returning 0, and customFields undefined. Also covered standard chart types, display types (EXERCISE/WORKOUT/COMBINED/ALL), dynamic exercise types (duration/distance/heartRate), custom parameters, date formatting, and edge cases. Achieved 100% statement, 100% function, 100% line coverage. Branch coverage at 86.59% - remaining uncovered branches (lines 88-97, 145, 291-306) are covered by US-005/US-006."
    },
    {
      "id": "US-005",
      "title": "Expand ChartDataUtils.ts coverage - lines 104-143",
      "description": "As a developer, I need ChartDataUtils tested for lines 104-143.",
      "acceptanceCriteria": [
        "Read ChartDataUtils.ts to understand logic in lines 104-143",
        "Add tests to cover the identified code section",
        "Cover all branches in this section",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Expand ChartDataUtils.ts coverage - lines 236-252",
      "description": "As a developer, I need ChartDataUtils tested for lines 236-252. This completes the file coverage.",
      "acceptanceCriteria": [
        "Read ChartDataUtils.ts to understand logic in lines 236-252",
        "Add tests to cover the identified code section",
        "Achieve 90%+ overall coverage on ChartDataUtils.ts",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Expand ChartRenderer.ts coverage",
      "description": "As a developer, I need ChartRenderer fully tested. Lines 30, 47-54, and 166 are uncovered (50% branch coverage).",
      "acceptanceCriteria": [
        "Read ChartRenderer.ts to understand uncovered lines 30, 47-54, 166",
        "Add tests to app/features/charts/components/__tests__/ChartRenderer.test.ts",
        "Cover error handling paths",
        "Achieve 90%+ branch coverage on ChartRenderer.ts",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 7,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "Expand DataService.ts coverage",
      "description": "As a developer, I need DataService fully tested. Lines 72 and 99-107 are uncovered (85.71% statements).",
      "acceptanceCriteria": [
        "Read DataService.ts to understand uncovered lines 72, 99-107",
        "Add tests covering cache invalidation and error scenarios",
        "Achieve 90%+ coverage on DataService.ts",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "Add CSVCacheService and CSVColumnService to coverage",
      "description": "As a developer, I need data services tested. Add these files to jest coverage scope and write tests.",
      "acceptanceCriteria": [
        "Add 'app/services/data/CSVCacheService.ts' to jest.config.js collectCoverageFrom",
        "Add 'app/services/data/CSVColumnService.ts' to jest.config.js collectCoverageFrom",
        "Create app/services/data/__tests__/CSVCacheService.test.ts",
        "Create app/services/data/__tests__/CSVColumnService.test.ts",
        "Achieve 90%+ coverage on both files",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 9,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-010",
      "title": "Add DataFilter to coverage",
      "description": "As a developer, I need DataFilter tested. Add to coverage scope and write tests.",
      "acceptanceCriteria": [
        "Add 'app/services/data/DataFilter.ts' to jest.config.js collectCoverageFrom",
        "Create app/services/data/__tests__/DataFilter.test.ts",
        "Test multi-strategy matching: exact, fuzzy, filename, exercise field",
        "Achieve 90%+ coverage on DataFilter.ts",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 10,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-011",
      "title": "Add TrendCalculator to coverage scope",
      "description": "As a developer, I need TrendCalculator in coverage scope. Tests already exist but file may not be tracked.",
      "acceptanceCriteria": [
        "Add 'app/services/data/TrendCalculator.ts' to jest.config.js collectCoverageFrom",
        "Verify existing tests cover the file adequately",
        "Add additional tests if coverage is below 90%",
        "Achieve 90%+ coverage on TrendCalculator.ts",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 11,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-012",
      "title": "Add WorkoutLogRepository to coverage",
      "description": "As a developer, I need WorkoutLogRepository tested.",
      "acceptanceCriteria": [
        "Add 'app/services/data/WorkoutLogRepository.ts' to jest.config.js collectCoverageFrom",
        "Create app/services/data/__tests__/WorkoutLogRepository.test.ts",
        "Test CRUD operations and data retrieval methods",
        "Achieve 90%+ coverage on WorkoutLogRepository.ts",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 12,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-013",
      "title": "Add TimerCore to coverage",
      "description": "As a developer, I need TimerCore tested for timer business logic.",
      "acceptanceCriteria": [
        "Add 'app/features/timer/business/TimerCore.ts' to jest.config.js collectCoverageFrom",
        "Create app/features/timer/business/__tests__/TimerCore.test.ts",
        "Test start, pause, resume, reset, tick logic",
        "Test interval timer functionality",
        "Achieve 90%+ coverage on TimerCore.ts",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 13,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-014",
      "title": "Add table business logic to coverage - TableDataProcessor",
      "description": "As a developer, I need TableDataProcessor tested.",
      "acceptanceCriteria": [
        "Add 'app/features/tables/business/TableDataProcessor.ts' to jest.config.js collectCoverageFrom",
        "Create app/features/tables/business/__tests__/TableDataProcessor.test.ts",
        "Test data transformation and processing logic",
        "Achieve 90%+ coverage on TableDataProcessor.ts",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 14,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-015",
      "title": "Add table business logic to coverage - TargetCalculator",
      "description": "As a developer, I need TargetCalculator tested.",
      "acceptanceCriteria": [
        "Add 'app/features/tables/business/TargetCalculator.ts' to jest.config.js collectCoverageFrom",
        "Create app/features/tables/business/__tests__/TargetCalculator.test.ts",
        "Test target calculation methods",
        "Achieve 90%+ coverage on TargetCalculator.ts",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 15,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-016",
      "title": "Add dashboard muscle calculations to coverage",
      "description": "As a developer, I need MuscleDataCalculator and MuscleTagMapper tested.",
      "acceptanceCriteria": [
        "Add 'app/features/dashboard/business/muscleHeatMap/MuscleDataCalculator.ts' to jest.config.js collectCoverageFrom",
        "Add 'app/features/dashboard/business/muscleHeatMap/MuscleTagMapper.ts' to jest.config.js collectCoverageFrom",
        "Create tests for both files in __tests__ directories",
        "Achieve 90%+ coverage on both files",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 16,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-017",
      "title": "Add chart config to coverage - ChartConfigBuilder",
      "description": "As a developer, I need ChartConfigBuilder tested.",
      "acceptanceCriteria": [
        "Add 'app/features/charts/config/ChartConfigBuilder.ts' to jest.config.js collectCoverageFrom",
        "Create app/features/charts/config/__tests__/ChartConfigBuilder.test.ts",
        "Test config generation for different chart types",
        "Achieve 90%+ coverage on ChartConfigBuilder.ts",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 17,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-018",
      "title": "Add DatasetStyler to coverage",
      "description": "As a developer, I need DatasetStyler tested.",
      "acceptanceCriteria": [
        "Add 'app/features/charts/config/DatasetStyler.ts' to jest.config.js collectCoverageFrom",
        "Create app/features/charts/config/__tests__/DatasetStyler.test.ts",
        "Test styling generation for different dataset types",
        "Achieve 90%+ coverage on DatasetStyler.ts",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 18,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-019",
      "title": "Add LogFormValidator to coverage",
      "description": "As a developer, I need form validation logic tested.",
      "acceptanceCriteria": [
        "Add 'app/features/modals/base/logic/LogFormValidator.ts' to jest.config.js collectCoverageFrom",
        "Create app/features/modals/base/logic/__tests__/LogFormValidator.test.ts",
        "Test all validation scenarios",
        "Achieve 90%+ coverage on LogFormValidator.ts",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 19,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-020",
      "title": "Update Jest coverage threshold to 90%",
      "description": "As a developer, I need the coverage threshold updated to enforce the new standard.",
      "acceptanceCriteria": [
        "Update jest.config.js coverageThreshold to 90 for statements, branches, functions, lines",
        "Run npm run test:coverage and verify it passes",
        "All metrics meet or exceed 90% threshold",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 20,
      "passes": false,
      "notes": ""
    }
  ]
}
